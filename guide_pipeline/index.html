<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Tade Souaiaia" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Pipeline - BridgePRS</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link href="../css/extra.css" rel="stylesheet" />
        <link href="../css/style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Pipeline";
        var mkdocs_page_input_path = "guide_pipeline.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]--> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> BridgePRS
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Requirements</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../req_system/">System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../req_software/">Software</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../req_mac/">Mac Specific</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Quick Start Tutorial</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../quikstart_data/">Toy Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quikstart_demo/">Demo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quikstart_result/">Results</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guide</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../guide_background/">Background</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guide_input/">Input Data</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Pipeline</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guide_output/">Output Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guide_usecases/">Use Cases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guide_args/">All Arguments</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guide_customization/">Customization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guide_shell/">Using Bash</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Misc</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../misc_faq/">Frequently Asked Questions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../misc_downloads/">Direct Downloads</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../misc_log/">Update Log</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">BridgePRS</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Guide</li>
      <li class="breadcrumb-item active">Pipeline</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/tadesouaiaia/BridgePRS-website/edit/master/docs/guide_pipeline.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p><img alt="Screenshot" src="../img/slim/guide_logo4.png" /> </p>
<h1 id="main-program">Main Program</h1>
<p>A pipeline implementin the BridgePRS method desribed in our Nature
Genetics paper can be run with the following command:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>BridgePRS easyrun go
</code></pre></div>
<p>The pipeline requires the following input from both the target and base populations: </p>
<ol>
<li><strong>--pop:</strong> The population name</li>
<li><strong>--ldpop:</strong> The ld reference population, if different from population name</li>
<li><strong>--sumstats_prefix:</strong> Sumstats data </li>
<li><strong>--genotype_prefix:</strong> Target Genotype Data </li>
<li><strong>--phenotype_file:</strong> Target Phenotype File </li>
</ol>
<p>This information can be provided on the command line or using config
files. The pipeline runs multiple subprograms that are described
below.</p>
<h1 id="modelling-overview">Modelling overview</h1>
<p>Figure 1 of our Nature Genetics paper provides an overview of the
modelling implemented by BridgePRS. The BridgePRS pipeline consists
of five related subprograms which correspond to Stage 1 and Stage 2
analyses described in Figure 1. Stage 1 analysis is a single
population analysis. Stage 2 uses the output from a Stage 1 analysis
of the base population as a prior for the target population, this
analysis produces model M1 in Figure 1. Stage 1 analysis of the
target population produces model M2. Model M3 combines PRS from both
Stage 1 and Stage 2 analyses. The final BridgePRS model is a weighted
sum of models M1, M2 and M3.</p>
<p>Model M1 reflects the belief that the target population GWAS is only
informative in conjugtion with the base population GWAS.</p>
<p>Model M2 reflects the belief that the target population GWAS is
informative and the base population GWAS gives no addition
information.</p>
<p>Model M3 reflects the belief both the base and target population GWAS
contribute independent information.</p>
<p>Since apriori we do not know which of the three scenarios
corresponding to models M1, M2 and M3 are true, BridgePRS weights
these models to produce a single target population PRS. However,
BridgePRS reports SNP weights and R2 in the target population for both
the weighted model and M1, M2 and M3 enabling the user to use any of
the four models.</p>
<h1 id="subprograms">Subprograms</h1>
<p>1) <strong>BridgePRS prs-single</strong> -- Stage 1 analysis to estimate models M2
and M3<br />
2) <strong>BridgePRS build-model</strong> -- Stage 1 analysis for input into Stage 2<br />
3) <strong>BridgePRS prs-prior</strong> -- Stage 2 analysis to estimate models M1
and M3<br />
4) <strong>BridgePRS analyse combine</strong> -- Estimates models M1, M2, M3 and
weighted model<br />
5) <strong>BridgePRS prs-port</strong> -- Estimates target PRS without target GWAS  </p>
<h2 id="prs-single-stage-1-analysis-in-the-ng-paper">prs-single -- Stage 1 analysis in the NG paper</h2>
<p><strong>prs-single</strong> performs single population analysis. It is used by the
main pipeline to capture target population specific effects.
<strong>prs-single</strong> can be run on its own with the command <code>./bridgePRS
prs-single run</code> with the following arguments on the command line or
configuration file:</p>
<ol>
<li><strong>--pop:</strong> The name of your target population </li>
<li><strong>--ldpop:</strong> The ld reference name, if different from target population name </li>
<li><strong>--sumstats_prefix:</strong> Sumstats data </li>
<li><strong>--genotype_prefix:</strong> Target Genotype Data </li>
<li><strong>--phenotype_file:</strong> Target Phenotype File </li>
</ol>
<h2 id="prs-port">prs-port</h2>
<p><strong>prs-port</strong> estimates a target population PRS without GWAS summary
statistics from the target population by optimising base
population PRS using individual level data from the target
population. <strong>prs-port</strong> is run with the command <code>./bridgePRS
prs-port run</code> with the following arguments on the command line or
configuration file:</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../guide_input/" class="btn btn-neutral float-left" title="Input Data"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../guide_output/" class="btn btn-neutral float-right" title="Output Data">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/tadesouaiaia/BridgePRS-website" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../guide_input/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../guide_output/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="../javascripts/details.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
